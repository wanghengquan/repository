ldc_dict = dict()
ldc_dict["01_Arith_DCT"] = [['clk', 18.754]]
ldc_dict["01_Arith_ecpu"] = [['CLK', 37.151]]
ldc_dict["01_Arith_Gaussian"] = [['clk', 8.543]]
ldc_dict["01_Arith_radix_fft"] = [['clk', 20.462]]
ldc_dict["05_Crypto_AES"] = [['CLK_I', 38.489]]
ldc_dict["05_Crypto_Grain"] = [['CLK_I', 16.424]]
ldc_dict["05_Crypto_SHA2"] = [['clk', 53.903]]
ldc_dict["05_Crypto_Simon"] = [['clk', 19.007]]
ldc_dict["06_DSP_Adaptive_LMS"] = [['clock', 14.221]]
ldc_dict["06_DSP_IIP_low_pass"] = [['CLK', 113.617]]
ldc_dict["06_DSP_IIR_bessel6"] = [['clock', 31.651]]
ldc_dict["06_DSP_IIR_bessel8"] = [['clock', 30.618]]
ldc_dict["06_DSP_IIR_butterworth"] = [['clock', 24.897]]
ldc_dict["07_ECC_CF_vhd"] = [['clock_c', 15.999]]
ldc_dict["07_ECC_CF_vlg"] = [['clock_c', 16.688]]
ldc_dict["07_ECC_Constellation_Encoder"] = [['clk', 21.537]]
ldc_dict["10_Other_fabric_analysis_pwm_driver"] = [['clk', 29.708]]
ldc_dict["10_Other_fm_receiver"] = [['clk', 40.341]]
ldc_dict["10_Other_glue"] = [['iClkFast', 12.303], ['iClkSlow', 11.947]]
ldc_dict["10_Other_ima_adpcm_encoder"] = [['wb_clk_i', 30.645]]
ldc_dict["10_Other_keyboardcontroller"] = [['clk_in', 8.105]]
ldc_dict["10_Other_lcd_controller16x2"] = [['clk', 21.707]]
ldc_dict["10_Other_portkey"] = [['clk', 26.647]]
ldc_dict["10_Other_timer8254"] = [['PCLK', 27.881], ['clk0', 22.9], ['clk1', 23.416], ['clk2', 25.442]]
ldc_dict["11_powertop_sb"] = [['clk', 32.82]]
ldc_dict["11_Processor_68hc05"] = [['clk', 60.593]]
ldc_dict["11_Processor_8080_core"] = [['clock', 28.21]]
ldc_dict["11_Processor_AVR_Core_for_CPL"] = [['clk', 28.54]]
ldc_dict["11_Processor_Brainfuck_CPU"] = [['clk', 24.939]]
ldc_dict["11_Processor_cpu6502_tc"] = [['clk_clk_i', 74.327]]
ldc_dict["11_Processor_Cpu_Generator"] = [['clk_in', 44.782]]
ldc_dict["11_Processor_CPU_MCS"] = [['sysclk', 27.018]]
ldc_dict["11_Processor_IC682_vhd"] = [['CA1', 4.809], ['CB1', 4.093], ['e', 35.738]]
ldc_dict["11_Processor_McAdam"] = [['clock', 130.192]]
ldc_dict["11_Processor_NextZ80"] = [['CLK', 121.108]]
ldc_dict["11_Processor_Open8_uRIS"] = [['Clock', 46.819]]
ldc_dict["11_Processor_SAYEH"] = [['clk', 67.229]]
ldc_dict["11_Processor_T80_cp"] = [['CLK_n', 72.374]]
ldc_dict["11_Processor_v586"] = [['CLK', 25.972]]
ldc_dict["13_System_ctl_pic"] = [['CLK_I', 29.137]]
ldc_dict["144_SPI_core"] = [['clk_i', 17.059]]
ldc_dict["145_SPI_Flash_controller"] = [['clk_in', 18.564]]
ldc_dict["147_Unsigned_serial_divider"] = [['clk_i', 22.446]]
ldc_dict["14_Video_ctl_lcd1"] = [['clk', 23.284]]
ldc_dict["173_UART16750"] = [['CLK', 25.972]]
ldc_dict["26_dirac_decoder"] = [['CLOCK', 31.65]]
ldc_dict["88_Manchester_Decoder_for_Wireless"] = [['clk_i', 13.454]]
ldc_dict["D1126"] = [['i_osc_clk', 14.874]]
ldc_dict["I2CButtons"] = [['i_clk', 18.591], ['i_scl', 35.996]]
ldc_dict["I2CPWM"] = [['i_SCL', 46.564], ['i_clk', 11.787]]
ldc_dict["I2C_Slave"] = [['i_clk', 18.886], ['io_scl', 39.78]]
ldc_dict["Innolux_LCD"] = [['sys_clk', 12.368]]
ldc_dict["Keypad_Scanner"] = [['i_clk', 11.92]]
ldc_dict["RC4_PRNG"] = [['clk_sys', 15.151]]
ldc_dict["Touch_Screen_Controller"] = [['i_clk', 6.628]]
ldc_dict["UART"] = [['clk_sys', 46.772]]
# ---------------------
fdc_dict = dict()
fdc_dict["01_Arith_DCT"] = [['clk', 22.833]]
fdc_dict["01_Arith_ecpu"] = [['CLK', 29.574]]
fdc_dict["01_Arith_Gaussian"] = [['clk', 6.584]]
fdc_dict["01_Arith_radix_fft"] = [['clk', 19.851]]
fdc_dict["05_Crypto_AES"] = [['CLK_I', 36.583]]
fdc_dict["05_Crypto_Grain"] = [['CLK_I', 17.774]]
fdc_dict["05_Crypto_SHA2"] = [['clk', 60.775]]
fdc_dict["05_Crypto_Simon"] = [['clk', 12.411]]
fdc_dict["06_DSP_IIP_low_pass"] = [['CLK', 94.369]]
fdc_dict["06_DSP_IIR_bessel6"] = [['clock', 29.108]]
fdc_dict["06_DSP_IIR_bessel8"] = [['clock', 31.996]]
fdc_dict["06_DSP_IIR_butterworth"] = [['clock', 24.83]]
fdc_dict["07_ECC_CF_vhd"] = [['clock_c', 14.105]]
fdc_dict["07_ECC_CF_vlg"] = [['clock_c', 13.589]]
fdc_dict["07_ECC_Constellation_Encoder"] = [['clk', 19.058]]
fdc_dict["10_Other_fabric_analysis_pwm_driver"] = [['clk', 19.515]]
fdc_dict["10_Other_fm_receiver"] = [['clk', 37.6]]
fdc_dict["10_Other_glue"] = [['iClkFast', 12.038], ['iClkSlow', 11.76]]
fdc_dict["10_Other_ima_adpcm_encoder"] = [['wb_clk_i', 30.659]]
fdc_dict["10_Other_keyboardcontroller"] = [['clk_in', 52.012]]
fdc_dict["10_Other_lcd_controller16x2"] = [['clk', 22.621]]
fdc_dict["10_Other_portkey"] = [['clk', 28.901]]
fdc_dict["10_Other_timer8254"] = [['PCLK', 27.03], ['clk0', 26.263], ['clk1', 29.403], ['clk2', 25.8]]
fdc_dict["11_powertop_sb"] = [['clk', 39.509]]
fdc_dict["11_Processor_68hc05"] = [['clk', 50.315]]
fdc_dict["11_Processor_8080_core"] = [['clock', 46.184]]
fdc_dict["11_Processor_AVR_Core_for_CPL"] = [['clk', 27.917]]
fdc_dict["11_Processor_Brainfuck_CPU"] = [['clk', 25.546]]
fdc_dict["11_Processor_cpu6502_tc"] = [['clk_clk_i', 83.228]]
fdc_dict["11_Processor_Cpu_Generator"] = [['clk_in', 42.686]]
fdc_dict["11_Processor_CPU_MCS"] = [['sysclk', 28.529]]
fdc_dict["11_Processor_IC682_vhd"] = [['e', 17.612], ['CA1', 4.213], ['CB1', 4.093]]
fdc_dict["11_Processor_McAdam"] = [['clock', 124.517]]
fdc_dict["11_Processor_NextZ80"] = [['CLK', 122.896]]
fdc_dict["11_Processor_Open8_uRIS"] = [['Clock', 40.751]]
fdc_dict["11_Processor_SAYEH"] = [['clk', 60.496]]
fdc_dict["11_Processor_T80_cp"] = [['CLK_n', 81.208]]
fdc_dict["11_Processor_v586"] = [['CLK', 24.236]]
fdc_dict["13_System_ctl_pic"] = [['CLK_I', 27.694]]
fdc_dict["144_SPI_core"] = [['clk_i', 16.489]]
fdc_dict["145_SPI_Flash_controller"] = [['clk_in', 26.514]]
fdc_dict["147_Unsigned_serial_divider"] = [['clk_i', 22.354]]
fdc_dict["14_Video_ctl_lcd1"] = [['clk', 23.297]]
fdc_dict["173_UART16750"] = [['CLK', 24.236]]
fdc_dict["26_dirac_decoder"] = [['CLOCK', 30.234]]
fdc_dict["88_Manchester_Decoder_for_Wireless"] = [['clk_i', 14.567]]
fdc_dict["D1126"] = [['i_osc_clk', 39.202]]
fdc_dict["I2CButtons"] = [['i_clk', 9.55], ['i_scl', 36.578]]
fdc_dict["I2CPWM"] = [['i_SCL', 52.944], ['i_clk', 13.709]]
fdc_dict["I2C_Slave"] = [['i_clk', 23.347], ['io_scl', 47.594]]
fdc_dict["Innolux_LCD"] = [['sys_clk', 29.638]]
fdc_dict["Keypad_Scanner"] = [['i_clk', 20.052]]
fdc_dict["RC4_PRNG"] = [['clk_sys', 17.788]]
fdc_dict["Touch_Screen_Controller"] = [['i_clk', 8.06]]
fdc_dict["UART"] = [['clk_sys', 42.796]]
# ---------------------
import os
import time


def get_ldc_fdc_lines(ports):
    lines = list()
    lines.append("## Set period (which come from 1MHz) for design @ %s" % time.ctime())
    lines.append("## %s" % ports)
    for (port, period) in ports:
        lines.append("create_clock -period %.3f -name %s [get_ports {%s}]" % (period/1.2, port, port))
    if len(ports) > 1:
        _group = ["-group [get_clocks %s]" % item[0] for item in ports]
        lines.append("set_clock_groups %s -logically_exclusive" % " ".join(_group))
    return lines


def update_folder(top_dir, port_period_dict, dc_fext):
    for design in os.listdir(top_dir):
        ports = port_period_dict.get(design)
        if not ports:
            continue
        new_lines = get_ldc_fdc_lines(ports)
        new_lines = "\n".join(new_lines)
        design_path = os.path.join(top_dir, design)
        for a, b, c in os.walk(design_path):
            for foo in c:
                foo_lower = foo.lower()
                if foo_lower.endswith(dc_fext):
                    b = open(os.path.join(a, foo), "w")
                    print(new_lines, file=b)
                    b.close()


#update_folder(r"D:\chuang-qian-mingyue-guang\first_period_11b2\ng_source_fdc", fdc_dict, ".fdc")
#update_folder(r"D:\chuang-qian-mingyue-guang\first_period_11b2\ng_source_ldc", ldc_dict, ".ldc")
#update_folder(r"D:\chuang-qian-mingyue-guang\first_period_3506\ng_source_fdc", fdc_dict, ".fdc")
#update_folder(r"D:\chuang-qian-mingyue-guang\first_period_3506\ng_source_ldc", ldc_dict, ".ldc")
update_folder(r"D:\inc_roma_cup\Tplus-QoR\ng_source_fdc", fdc_dict, ".fdc")
update_folder(r"D:\inc_roma_cup\Tplus-QoR\ng_source_ldc", ldc_dict, ".ldc")